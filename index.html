<!DOCTYPE html>
<html lang="gu">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>What A App - Vidushi</title>
<style>
:root{--bg:#f0f2f5;--panel:#fff;--text:#111;--muted:#667;--accent:#25D366;--accent-dark:#128C7E;--bubble-me:#d9fdd3;--bubble-them:#fff;--border:#e5e7eb;--danger:#e53935;}
.dark{--bg:#0b141a;--panel:#111b21;--text:#e9edef;--muted:#aebac1;--bubble-me:#005c4b;--bubble-them:#202c33;--border:#1f2c34;}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,sans-serif;overflow:hidden;}

/* Splash */
#splash{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#25D366;color:#fff;z-index:9999;transition:opacity .8s ease;}
#splash.fade{opacity:0;pointer-events:none;}
.logo-circle{width:80px;height:80px;border-radius:50%;background:#fff;color:#25D366;font-weight:700;display:flex;align-items:center;justify-content:center;font-size:2rem;margin-bottom:10px;}

/* Layout */
.app{display:flex;flex-direction:column;height:100vh;}
.content{flex:1;display:grid;grid-template-columns:360px 1fr;min-height:0;}
@media(max-width:900px){.content{grid-template-columns:1fr;}}

.panel{background:var(--panel);border-right:1px solid var(--border);display:flex;flex-direction:column;}
.topbar{display:flex;align-items:center;gap:10px;padding:12px;border-bottom:1px solid var(--border);background:var(--panel);}
.avatar{width:38px;height:38px;border-radius:50%;display:grid;place-items:center;color:#fff;font-weight:700;background:#128C7E;flex-shrink:0;}
.spacer{flex:1}
.iconbtn{border:none;background:transparent;cursor:pointer;font-size:1.2rem;padding:5px;}

/* Search & List */
.search{padding:8px 12px;border-bottom:1px solid var(--border);}
.search input{width:100%;padding:10px;border-radius:20px;border:1px solid var(--border);background:var(--bg);color:var(--text);}
.list{overflow-y:auto;flex:1;}
.row{display:flex;gap:12px;padding:12px;border-bottom:1px solid var(--border);cursor:pointer;transition:0.2s;}
.row:hover{background:rgba(0,0,0,0.05);}
.row .meta{flex:1;min-width:0;}
.row .name{font-weight:600;margin-bottom:2px;}
.row .preview{color:var(--muted);font-size:0.85rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}

/* Chat Area */
#chatPanel{display:flex;flex-direction:column;}
@media(max-width:900px){#chatPanel{display:none;position:fixed;inset:0;z-index:50;background:var(--bg);}}
.messages{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;background-image: url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png');}
.bubble{max-width:70%;padding:8px 12px;border-radius:10px;margin:5px 0;position:relative;font-size:0.95rem;line-height:1.4;}
.me{align-self:flex-end;background:var(--bubble-me);border-bottom-right-radius:2px;}
.them{align-self:flex-start;background:var(--bubble-them);border-bottom-left-radius:2px;}
.m-time{font-size:0.7rem;color:var(--muted);text-align:right;margin-top:4px;}

/* Input Area */
.composer{padding:10px;display:flex;align-items:center;gap:10px;background:var(--panel);border-top:1px solid var(--border);}
.composer input{flex:1;padding:12px;border-radius:25px;border:1px solid var(--border);background:var(--bg);color:var(--text);}
.sendbtn{background:var(--accent-dark);color:white;border:none;padding:10px 18px;border-radius:20px;font-weight:bold;cursor:pointer;}

/* Tabs */
.footer{display:flex;background:var(--panel);border-top:1px solid var(--border);padding:8px 0;}
.tab{flex:1;text-align:center;background:none;border:none;color:var(--muted);cursor:pointer;font-size:0.8rem;}
.tab.active{color:var(--accent-dark);font-weight:bold;}

/* Modals */
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:1000;}
.modal-content{background:var(--panel);padding:20px;border-radius:15px;width:90%;max-width:400px;}
.modal-content input{width:100%;padding:10px;margin:10px 0;border-radius:8px;border:1px solid var(--border);background:var(--bg);color:var(--text);}
</style>
</head>
<body>

<div id="splash">
  <div class="logo-circle">WA</div>
  <h2 style="margin:0">What A App</h2>
  <p>àªœàª¯ àª¶à«àª°à«€ àª•à«ƒàª·à«àª£ ğŸ™</p>
</div>

<div class="app">
  <div class="content">
    <section class="panel" id="leftPanel">
      <div class="topbar">
        <div class="avatar">WA</div>
        <div style="font-weight:bold">àªšà«‡àªŸà«àª¸</div>
        <div class="spacer"></div>
        <button class="iconbtn" onclick="openModal()">â•</button>
        <button class="iconbtn" id="themeToggle">ğŸŒ“</button>
      </div>
      <div class="search"><input type="text" id="searchInput" placeholder="àª¸àª°à«àªš àª•àª°à«‹..."></div>
      <div id="chatList" class="list"></div>
      
      <nav class="footer">
        <button class="tab active">ğŸ’¬<br>àªšà«‡àªŸ</button>
        <button class="tab">ğŸ””<br>àª…àªªàª¡à«‡àªŸ</button>
        <button class="tab">ğŸ‘¥<br>àª•à«‹àª®à«àª¯à«àª¨àª¿àªŸà«€</button>
        <button class="tab">âš™ï¸<br>àª¸à«‡àªŸàª¿àª‚àª—à«àª¸</button>
      </nav>
    </section>

    <section class="panel" id="chatPanel">
      <div class="topbar">
        <button class="iconbtn" id="backBtn" style="display:none">â¬…ï¸</button>
        <div class="avatar" id="activeAvatar">?</div>
        <div id="activeTitle" style="font-weight:bold">àª•à«‹àªˆ àªšà«‡àªŸ àªªàª¸àª‚àª¦ àª•àª°à«‹</div>
      </div>
      <div class="messages" id="messageBox"></div>
      <div class="composer">
        <input type="text" id="msgInput" placeholder="àª®à«‡àª¸à«‡àªœ àª²àª–à«‹...">
        <button class="sendbtn" id="sendBtn">àª®à«‹àª•àª²à«‹</button>
      </div>
    </section>
  </div>
</div>

<div class="modal" id="contactModal">
  <div class="modal-content">
    <h3>àª¨àªµà«‹ àª¸àª‚àªªàª°à«àª• àª‰àª®à«‡àª°à«‹</h3>
    <input type="text" id="newName" placeholder="àª¨àª¾àª®">
    <input type="text" id="newNumber" placeholder="àª¨àª‚àª¬àª°">
    <div style="text-align:right">
      <button onclick="closeModal()" style="background:none; border:none; color:red; cursor:pointer">àª°àª¦ àª•àª°à«‹</button>
      <button onclick="saveContact()" style="background:var(--accent-dark); color:white; border:none; padding:8px 15px; border-radius:5px; margin-left:10px; cursor:pointer">àª¸à«‡àªµ àª•àª°à«‹</button>
    </div>
  </div>
</div>

<script>
// State Management
let state = JSON.parse(localStorage.getItem('wa_data')) || {
  contacts: [
    {id: 1, name: "àª®àª®à«àª®à«€", color: "#e67e22", lastMsg: "àªœàª¯ àª¶à«àª°à«€ àª•à«ƒàª·à«àª£"},
    {id: 2, name: "àª®àª¿àª¤à«àª°", color: "#16a085", lastMsg: "àª•à«‡àª® àª›à«‡?"}
  ],
  chats: { 1: [], 2: [] },
  theme: 'light'
};

let activeChatId = null;

// Initialization
document.addEventListener('DOMContentLoaded', () => {
  renderContacts();
  if(state.theme === 'dark') document.body.classList.add('dark');
  
  // Splash Screen remove
  setTimeout(() => {
    document.getElementById('splash').classList.add('fade');
    setTimeout(() => document.getElementById('splash').remove(), 800);
  }, 1500);
});

// Theme Toggle
document.getElementById('themeToggle').onclick = () => {
  state.theme = state.theme === 'light' ? 'dark' : 'light';
  document.body.classList.toggle('dark');
  saveData();
};

function saveData() {
  localStorage.setItem('wa_data', JSON.stringify(state));
}

function renderContacts() {
  const list = document.getElementById('chatList');
  const search = document.getElementById('searchInput').value.toLowerCase();
  list.innerHTML = '';
  
  state.contacts.filter(c => c.name.toLowerCase().includes(search)).forEach(c => {
    const row = document.createElement('div');
    row.className = 'row';
    row.onclick = () => openChat(c);
    row.innerHTML = `
      <div class="avatar" style="background:${c.color}">${c.name[0]}</div>
      <div class="meta">
        <div class="name">${c.name}</div>
        <div class="preview">${c.lastMsg || ''}</div>
      </div>
    `;
    list.appendChild(row);
  });
}

function openChat(contact) {
  activeChatId = contact.id;
  document.getElementById('activeTitle').innerText = contact.name;
  document.getElementById('activeAvatar').innerText = contact.name[0];
  document.getElementById('activeAvatar').style.background = contact.color;
  
  if(window.innerWidth <= 900) {
    document.getElementById('chatPanel').style.display = 'flex';
    document.getElementById('backBtn').style.display = 'block';
  }
  
  renderMessages();
}

function renderMessages() {
  const box = document.getElementById('messageBox');
  box.innerHTML = '';
  const msgs = state.chats[activeChatId] || [];
  
  msgs.forEach(m => {
    const b = document.createElement('div');
    b.className = `bubble ${m.from === 'me' ? 'me' : 'them'}`;
    b.innerHTML = `<div>${m.text}</div><div class="m-time">${m.time}</div>`;
    box.appendChild(b);
  });
  box.scrollTop = box.scrollHeight;
}

document.getElementById('sendBtn').onclick = sendMessage;
document.getElementById('msgInput').onkeypress = (e) => { if(e.key === 'Enter') sendMessage(); };

function sendMessage() {
  const input = document.getElementById('msgInput');
  const text = input.value.trim();
  if(!text || !activeChatId) return;
  
  const now = new Date();
  const timeStr = now.getHours() + ":" + String(now.getMinutes()).padStart(2, '0');
  
  state.chats[activeChatId].push({ from: 'me', text, time: timeStr });
  
  // Update last message in contact list
  const contact = state.contacts.find(c => c.id === activeChatId);
  if(contact) contact.lastMsg = text;
  
  input.value = '';
  renderMessages();
  renderContacts();
  saveData();
}

// Modal Functions
function openModal() { document.getElementById('contactModal').style.display = 'flex'; }
function closeModal() { document.getElementById('contactModal').style.display = 'none'; }

function saveContact() {
  const name = document.getElementById('newName').value;
  if(!name) return;
  const id = Date.now();
  state.contacts.push({ id, name, color: '#128C7E', lastMsg: '' });
  state.chats[id] = [];
  saveData();
  renderContacts();
  closeModal();
}

document.getElementById('backBtn').onclick = () => {
  document.getElementById('chatPanel').style.display = 'none';
};

document.getElementById('searchInput').oninput = renderContacts;
</script>

</body>
</html>
