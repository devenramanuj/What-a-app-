<!DOCTYPE html>
<html lang="gu">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>WhatsApp Clone - Devendrabhai</title>
<style>
:root{--bg:#f0f2f5;--panel:#fff;--text:#111;--muted:#667;--accent:#25D366;--accent-dark:#128C7E;--bubble-me:#d9fdd3;--bubble-them:#fff;--border:#e5e7eb;}
.dark{--bg:#0b141a;--panel:#111b21;--text:#e9edef;--muted:#aebac1;--bubble-me:#005c4b;--bubble-them:#202c33;--border:#1f2c34;}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,sans-serif;overflow:hidden;}

#splash{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#25D366;color:#fff;z-index:9999;}
.app{display:flex;flex-direction:column;height:100vh;}
.content{display:grid;grid-template-columns:360px 1fr;height:100%;}
@media(max-width:900px){.content{grid-template-columns:1fr;} #chatPanel{display:none;position:fixed;inset:0;z-index:100;}}

.panel{background:var(--panel);border-right:1px solid var(--border);display:flex;flex-direction:column;}
.topbar{display:flex;align-items:center;gap:10px;padding:12px;border-bottom:1px solid var(--border);background:var(--panel);flex-shrink:0;}
.avatar{width:40px;height:40px;border-radius:50%;object-fit:cover;background:#128C7E;display:grid;place-items:center;font-weight:bold;color:white;flex-shrink:0;}

.list-container{flex:1;overflow-y:auto;}
.row{display:flex;align-items:center;padding:12px;border-bottom:1px solid var(--border);cursor:pointer;}
.row:hover{background:rgba(0,0,0,0.05);}

.messages{flex:1;overflow-y:auto;padding:20px;background:#e5ddd5 url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png');display:flex;flex-direction:column;}
.bubble{max-width:75%;padding:8px 12px;border-radius:10px;margin:5px 0;font-size:15px;position:relative;}
.me{align-self:flex-end;background:var(--bubble-me);border-top-right-radius:0;}
.them{align-self:flex-start;background:var(--bubble-them);border-top-left-radius:0;}
.m-info{font-size:10px;color:var(--muted);text-align:right;margin-top:4px;}
.tick{color:#34b7f1;font-weight:bold;}

.composer{padding:10px;background:var(--panel);display:flex;align-items:center;gap:10px;border-top:1px solid var(--border);}
.composer input{flex:1;padding:12px;border-radius:25px;border:none;background:var(--bg);color:var(--text);outline:none;}

.footer{display:flex;background:var(--panel);border-top:1px solid var(--border);padding:10px 0;}
.tab-btn{flex:1;text-align:center;background:none;border:none;color:var(--muted);font-size:11px;cursor:pointer;}
.tab-btn.active{color:var(--accent-dark);font-weight:bold;}

.credit-line{font-size:10px;text-align:center;padding:5px;color:var(--muted);background:var(--panel);border-top:1px solid var(--border);}

.modal{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:200;}
.modal-content{background:var(--panel);padding:20px;border-radius:15px;width:90%;max-width:350px;}
</style>
</head>
<body>

<div id="splash">
    <div style="font-size:40px;margin-bottom:10px;">ğŸ’¬</div>
    <h2 style="margin:0">What A App</h2>
    <p>Created by Devendrabhai ğŸ™</p>
</div>

<div class="app">
  <div class="content">
    <section class="panel">
      <div class="topbar">
        <div class="avatar" id="myAvatar">D</div>
        <b id="pTitle">What A App</b>
        <div style="flex:1"></div>
        <span style="cursor:pointer" onclick="openModal()">â•</span>
      </div>
      
      <div class="list-container" id="mainList"></div>

      <div class="credit-line">Vidushi Bot | Design by Devendrabhai</div>
      <nav class="footer">
        <button class="tab-btn active" onclick="showTab('chat')">ğŸ’¬<br>àªšà«‡àªŸ</button>
        <button class="tab-btn" onclick="showTab('status')">ğŸ””<br>àª…àªªàª¡à«‡àªŸ</button>
        <button class="tab-btn" onclick="showTab('comm')">ğŸ‘¥<br>àª•à«‹àª®à«àª¯à«àª¨àª¿àªŸà«€</button>
        <button class="tab-btn" onclick="showTab('set')">âš™ï¸<br>àª¸à«‡àªŸàª¿àª‚àª—à«àª¸</button>
      </nav>
    </section>

    <section class="panel" id="chatPanel">
      <div class="topbar">
        <button style="border:none;background:none;font-size:20px;cursor:pointer;" onclick="closeChat()" id="backBtn">â¬…ï¸</button>
        <img id="chatImg" class="avatar" src="" style="display:none">
        <div id="chatInitial" class="avatar">?</div>
        <div style="margin-left:5px">
          <b id="activeName">àªšà«‡àªŸ àªªàª¸àª‚àª¦ àª•àª°à«‹</b><br>
          <small id="lastSeen" style="color:var(--muted);font-size:11px">Online</small>
        </div>
      </div>
      <div class="messages" id="msgBox"></div>
      <div class="composer">
        <span style="cursor:pointer">ğŸ˜Š</span>
        <input type="text" id="mInput" placeholder="àª®à«‡àª¸à«‡àªœ àª²àª–à«‹...">
        <span style="cursor:pointer">ğŸ“</span>
        <button onclick="sendMsg()" style="border:none;background:none;color:var(--accent-dark);font-weight:bold;cursor:pointer;">àª®à«‹àª•àª²à«‹</button>
      </div>
    </section>
  </div>
</div>

<div class="modal" id="addModal">
  <div class="modal-content">
    <h3>àª¨àªµà«‹ àª¸àª‚àªªàª°à«àª• àª‰àª®à«‡àª°à«‹</h3>
    <input type="text" id="nName" placeholder="àª¨àª¾àª®" style="width:100%;padding:10px;margin-bottom:10px;border:1px solid var(--border);border-radius:5px;">
    <input type="file" id="nImg" accept="image/*" style="margin-bottom:15px;width:100%;">
    <button onclick="saveContact()" style="width:100%;padding:12px;background:var(--accent-dark);color:white;border:none;border-radius:5px;font-weight:bold;">àª¸à«‡àªµ àª•àª°à«‹</button>
    <button onclick="closeModal()" style="width:100%;padding:10px;background:none;border:none;color:red;margin-top:5px;">àª°àª¦ àª•àª°à«‹</button>
  </div>
</div>

<script>
let state = JSON.parse(localStorage.getItem('wa_pro_v1')) || {
  contacts: [{id:1, name:"àª®àª¿àª¤à«àª°", img:null, lastMsg:"àªœàª¯ àª¶à«àª°à«€ àª•à«ƒàª·à«àª£"}],
  chats: {1:[]},
  theme: 'light'
};
let curId = null;

function renderList() {
  const list = document.getElementById('mainList');
  list.innerHTML = '';
  state.contacts.forEach(c => {
    const d = document.createElement('div');
    d.className = 'row';
    d.onclick = () => openChat(c);
    const imgHtml = c.img ? `<img src="${c.img}" class="avatar">` : `<div class="avatar">${c.name[0]}</div>`;
    d.innerHTML = `${imgHtml}<div style="margin-left:12px;flex:1;"><b>${c.name}</b><br><small style="color:var(--muted)">${c.lastMsg}</small></div><div style="font-size:10px;color:var(--muted)">10:30 AM</div>`;
    list.appendChild(d);
  });
}

function openChat(c) {
  curId = c.id;
  document.getElementById('activeName').innerText = c.name;
  const time = new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
  document.getElementById('lastSeen').innerText = "Online";
  
  if(c.img) {
    document.getElementById('chatImg').src = c.img;
    document.getElementById('chatImg').style.display = 'block';
    document.getElementById('chatInitial').style.display = 'none';
  } else {
    document.getElementById('chatImg').style.display = 'none';
    document.getElementById('chatInitial').style.display = 'grid';
    document.getElementById('chatInitial').innerText = c.name[0];
  }
  
  if(window.innerWidth <= 900) {
    document.getElementById('chatPanel').style.display = 'flex';
  }
  renderMessages();
}

function renderMessages() {
  const box = document.getElementById('msgBox');
  box.innerHTML = '';
  const time = new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
  (state.chats[curId] || []).forEach(m => {
    const b = document.createElement('div');
    b.className = `bubble ${m.from}`;
    b.innerHTML = `<div>${m.text}</div><div class="m-info">${time} ${m.from==='me'?'<span class="tick">âœ“âœ“</span>':''}</div>`;
    box.appendChild(b);
  });
  box.scrollTop = box.scrollHeight;
}

function sendMsg() {
  const i = document.getElementById('mInput');
  if(!i.value || !curId) return;
  if(!state.chats[curId]) state.chats[curId] = [];
  state.chats[curId].push({from:'me', text:i.value});
  state.contacts.find(c => c.id === curId).lastMsg = i.value;
  i.value = '';
  saveState(); renderMessages(); renderList();
}

function saveContact() {
  const name = document.getElementById('nName').value;
  const file = document.getElementById('nImg').files[0];
  if(!name) return;
  const reader = new FileReader();
  reader.onload = (e) => {
    const id = Date.now();
    state.contacts.push({id, name, img: file ? e.target.result : null, lastMsg: ''});
    state.chats[id] = [];
    saveState(); renderList(); closeModal();
  };
  if(file) reader.readAsDataURL(file); else reader.onload({target:{result:null}});
}

function saveState() { localStorage.setItem('wa_pro_v1', JSON.stringify(state)); }
function openModal() { document.getElementById('addModal').style.display = 'flex'; }
function closeModal() { document.getElementById('addModal').style.display = 'none'; }
function closeChat() { document.getElementById('chatPanel').style.display = 'none'; }
function showTab(t) { document.getElementById('pTitle').innerText = t==='chat'?'What A App':t.toUpperCase(); }

window.onload = () => {
  renderList();
  setTimeout(() => document.getElementById('splash').style.display = 'none', 1500);
};
</script>
</body>
</html>
